<h4 dir="rtl">שליפת שמות אברכים לפי פרמטרים</h4>
<hr>
<div class="container">
  <!-- <div class="row">
    <mat-icon id="firstIcon">arrow_back</mat-icon>
    <p>הנתונים הינם מחודש קודם</p>
    <mat-icon>arrow_back</mat-icon>
  </div> -->
  <div class="row">

    <!--form 1-->
    <mat-card id="personalDetailes" class="col-md-4 search">
      <mat-card-header>
        <mat-card-title>פרטים אישיים</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <form class="example-form text-center p-5" style="color:#213464;" [formGroup]="form1" #form_1="ngForm">

          <mat-form-field class="input-field">
            <input matInput placeholder="גיל מינימלי" appOnlyNumberInput OnlyNumber="true" formControlName="minimumAge"
              type="text" id="minAge" #minAge [(ngModel)]="minimumAge" />
            <!-- <mat-placeholder class="placeholder">Search</mat-placeholder> -->
            <mat-error *ngIf="!minAge.valid ">
              שדה <strong>חובה</strong>
            </mat-error>
          </mat-form-field>

          <mat-form-field>
            <input matInput placeholder="גיל מקסימלי" appOnlyNumberInput OnlyNumber="true" formControlName="maximumAge"
              type="text" id="maxAge" #maxAge [(ngModel)]="maximumAge" maxlength="3" />
            <mat-error *ngIf="!maxAge.valid ">
              שדה <strong>חובה</strong>
            </mat-error>
          </mat-form-field>

          <mat-form-field>
            <input matInput placeholder="מספר ילדים מקסימלי" appOnlyNumberInput OnlyNumber="true"
              formControlName="maximumChildren" type="text" id="maxChildren" #maxChildren
              [(ngModel)]="maximumChildren" />
            <mat-error *ngIf="!maxChildren.valid ">
              שדה <strong>חובה</strong>
            </mat-error>
          </mat-form-field>

          <mat-form-field>
            <input matInput placeholder="מספר ילדים מינימלי" appOnlyNumberInput OnlyNumber="true"
              formControlName="minimumChildren" type="text" id="minChildren" #minChildren
              [(ngModel)]="minimumChildren" />
            <mat-error *ngIf="!minChildren.valid ">
              שדה <strong>חובה</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field>
            <input matInput placeholder="עיר" appOnlyHebrewLettersInput OnlyHebrewLetters="true"
              formControlName="userCity" type="text" id="city" #city [(ngModel)]="userCity" />
            <mat-error *ngIf="!city.valid ">
              שדה <strong>חובה</strong>
            </mat-error>
          </mat-form-field>

          <div class="form-row">
            <div class="col">
              <section class="example-section">
                <!-- <mat-checkbox class="col-md-3 example-margin" formControlName="noLearnMusar" #noMusar
                  [(ngModel)]="noLearnMusar" id="noMusar">לא לומד סדר
                  מוסר</mat-checkbox>
                <mat-checkbox class="col-md-3 example-margin" formControlName="learnMusar" #musar
                  [(ngModel)]="learnMusar" id="musar">לומד סדר
                  מוסר לומד</mat-checkbox> -->
                <mat-checkbox class="col-md-3 example-margin" formControlName="learnFullDay" #fullDay
                  [(ngModel)]="learnFullDay" id="fullDay">לומד
                  יום מלא</mat-checkbox>
                <mat-checkbox class="col-md-3 example-margin" formControlName="learnHalfDay" #halfDay
                  [(ngModel)]="learnHalfDay" id="halfDay">לומד חצי
                  יום</mat-checkbox>
                <mat-checkbox class="col-md-3 example-margin" formControlName="isManager" #manager
                  [(ngModel)]="isManager" id="manager">ראש כולל</mat-checkbox>
              </section>
            </div>
          </div>

        </form>
      </mat-card-content>
      <mat-card-actions style="margin-left: 0 !important" class="d-flex align-items-end">
        <!-- <div class="card-footer"> -->
        <button mat-stroked-button color="accent" style="width: -webkit-fill-available;"
          class=" searchButton innerSearch" type="submit" *ngIf="form_1.dirty" (click)="searchForCard_1(1)">חפש</button>
        <!-- </div> -->
      </mat-card-actions>
    </mat-card>
    <!-- <div class="row inSmallScrean">
      <p>הנתונים הינם מחודש קודם</p>
    </div> -->
    <!--form 2-->
    <mat-card id="scholarshipDetailes" class="col-md-4 search">
      <mat-card-header>
        <!-- <div mat-card-avatar class="example-header-image"></div> -->
        <mat-card-title>פרטי מלגות</mat-card-title>
        <!-- <mat-card-subtitle>Dog Breed</mat-card-subtitle> -->
      </mat-card-header>
      <mat-card-content>
        <!-- <p>(חודש קודם)</p> -->

        <form class="example-form text-center p-5" style="color:#213464;" [formGroup]="form2" #form_2="ngForm">

          <mat-form-field>
            <input matInput placeholder="סכום מלגה מינימלי" appOnlyNumberInput OnlyNumber="true"
              formControlName="minimumMilga" type="text" id="minMilga" #minMilga [(ngModel)]="minimumMilga" />
            <mat-error *ngIf="!minMilga.valid ">
              שדה <strong>חובה</strong>
            </mat-error>
          </mat-form-field>

          <mat-form-field>
            <input matInput placeholder="סכום מלגה מקסימלי" appOnlyNumberInput OnlyNumber="true"
              formControlName="maximumMilga" type="text" id="maxMilga" #maxMilga [(ngModel)]="maximumMilga" />
            <mat-error *ngIf="!maxMilga.valid ">
              שדה <strong>חובה</strong>
            </mat-error>
          </mat-form-field>

          <mat-form-field>
            <input matInput placeholder="מספר חיסורים מקסימלי" appOnlyNumberInput OnlyNumber="true"
              formControlName="maximumAbsance" type="text" id="maxAbsance" #maxAbsance [(ngModel)]="maximumAbsance" />
            <mat-error *ngIf="!maxAbsance.valid ">
              שדה <strong>חובה</strong>
            </mat-error>
          </mat-form-field>

          <mat-form-field>
            <input matInput placeholder="מספר חיסורים מינימלי" appOnlyNumberInput OnlyNumber="true"
              formControlName="minimumAbsance" type="text" id="maxAbsance" #minAbsance [(ngModel)]="minimumAbsance" />
            <mat-error *ngIf="!minAbsance.valid ">
              שדה <strong>חובה</strong>
            </mat-error>
          </mat-form-field>

          <mat-form-field>
            <input matInput placeholder="מספר התמדה מקסימלי" appOnlyNumberInput OnlyNumber="true"
              formControlName="maximumAtmada" type="text" id="maxAtmada" #maxAtmada [(ngModel)]="maximumAtmada" />
            <mat-error *ngIf="!maxAtmada.valid ">
              שדה <strong>חובה</strong>
            </mat-error>
          </mat-form-field>

          <mat-form-field>
            <input matInput placeholder="מספר התמדה מינימלי" appOnlyNumberInput OnlyNumber="true"
              formControlName="minimumAtmada" type="text" id="minAtmada" #minAtmada [(ngModel)]="minimumAtmada" />
            <mat-error *ngIf="!minAtmada.valid ">
              שדה <strong>חובה</strong>
            </mat-error>
          </mat-form-field>




        </form>

      </mat-card-content>
      <mat-card-actions class="d-flex align-items-end">
        <!-- <div class="card-footer"> -->
        <button class=" searchButton innerSearch" mat-stroked-button color="accent" mat-button type="submit"
          *ngIf="form_2.dirty" (click)="searchForCard_2(2)">חפש</button>
        <!-- </div> -->
      </mat-card-actions>
    </mat-card>
    <!-- <div class="row inSmallScrean">
      <p>הנתונים הינם מחודש קודם</p>
    </div> -->
    <!--form 3-->
    <mat-card id="loanDetailes" class="col-md-4 search">
      <mat-card-header>
        <!-- <div mat-card-avatar class="example-header-image"></div> -->
        <mat-card-title>פרטי הלוואות</mat-card-title>
        <!-- <mat-card-subtitle>Dog Breed</mat-card-subtitle> -->
      </mat-card-header>
      <mat-card-content>

        <!-- <div class="card-body d-flex flex-column"> -->
        <form class="example-form text-center p-5" style="color:#213464;" [formGroup]="form3" #form_3="ngForm">
          <!-- <form #form3> -->
          <mat-form-field>
            <input matInput placeholder="הלוואה עד תאריך (לועזי)" appOnlyNumberInput OnlyNumber="true"
              formControlName="lastDateLoan" type="date" id="lastDate" #lastDate [(ngModel)]="lastDateLoan" />
            <!-- <mat-error *ngIf="!lastDate.valid ">
              שדה <strong>חובה</strong>
            </mat-error> -->
          </mat-form-field>

          <mat-form-field>
            <input matInput placeholder="הלוואה מתאריך (לועזי)" appOnlyNumberInput OnlyNumber="true"
              formControlName="firstDateLoan" type="date" id="firstDate" #firstDate [(ngModel)]="firstDateLoan" />
            <!-- <mat-error *ngIf="!lastDate.valid ">
                שדה <strong>חובה</strong>
              </mat-error> -->
          </mat-form-field>

          <mat-form-field>
            <input matInput placeholder="גובה הלוואה מינימלי" appOnlyNumberInput OnlyNumber="true"
              formControlName="minSumLoan" type="text" id="minSum" #minSum [(ngModel)]="minSumLoan" />
          </mat-form-field>

          <mat-form-field>
            <input matInput placeholder="גובה הלוואה מקסימלי" appOnlyNumberInput OnlyNumber="true"
              formControlName="maxSumLoan" type="text" id="maxSum" #maxSum [(ngModel)]="maxSumLoan" />
          </mat-form-field>

        </form>

        <!-- </div> -->
      </mat-card-content>
      <mat-card-actions class="d-flex align-items-end">
        <!-- <div class="card-footer"> -->
        <!-- <button type="button" class="btn btn-primary btn-sm btn-block" onclick="location.href = '';">BUY NOW </button> -->

        <button mat-button class="searchButton innerSearch " mat-stroked-button color="accent" type="submit"
          *ngIf="form_3.dirty" (click)="searchForCard_3(3)">חפש</button>
        <!-- </div> -->
      </mat-card-actions>
    </mat-card>
  </div>
  <div class="row">
    <button mat-stroked-button color="accent" class=" searchButton innerSearch searchAll"
      (click)="searchAllCard(4)">חפש</button>
  </div>
</div>







<div class="row">
  <table class="table-responsive">
    <tbody>
      <tr>
        <td class="tdcontainTbl">
          <table mat-table [dataSource]="dataSourceUser" class="mat-elevation-z8  " *ngIf="showUsersTable">

            <!-- Position Column -->
            <ng-container matColumnDef="שם משפחה">
              <th mat-header-cell *matHeaderCellDef><strong> שם משפחה </strong></th>
              <td mat-cell *matCellDef="let element"> {{element.LastName}} </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="שם פרטי">
              <th mat-header-cell *matHeaderCellDef><strong> שם פרטי </strong></th>
              <td mat-cell *matCellDef="let element"> {{element.FirstName}} </td>
            </ng-container>

            <ng-container matColumnDef="מספר זהות">
              <th mat-header-cell *matHeaderCellDef><strong> מספר זהות </strong></th>
              <td mat-cell *matCellDef="let element"> {{element.Identity}} </td>
            </ng-container>
            <!-- *ngIf -->
            <ng-container matColumnDef="תאריך לידה">
              <th mat-header-cell *matHeaderCellDef
                [style.display]="(this.form1.getRawValue()['minimumAge']==''||this.form1.getRawValue()['minimumAge']==undefined)&&(this.form1.getRawValue()['maximumAge']==''||this.form1.getRawValue()['maximumAge']==undefined)?'none':null">

                <strong> תאריך לידה</strong></th>
              <td mat-cell *matCellDef="let element"
                [style.display]="(this.form1.getRawValue()['minimumAge']==''||this.form1.getRawValue()['minimumAge']==undefined)&&(this.form1.getRawValue()['maximumAge']==''||this.form1.getRawValue()['maximumAge']==undefined)?'none':null">
                {{element.BirthDate_hebrew}} </td>
            </ng-container>

            <!-- *ngIf -->
            <ng-container matColumnDef="ילדים">
              <th mat-header-cell *matHeaderCellDef
                [style.display]="(this.form1.getRawValue()['minimumChildren']==''||this.form1.getRawValue()['minimumChildren']==undefined)&&(this.form1.getRawValue()['maximumChildren']==''||this.form1.getRawValue()['maximumChildren']==undefined)?'none':null">
                <strong> מספר ילדים </strong></th>
              <td mat-cell *matCellDef="let element"
                [style.display]="(this.form1.getRawValue()['minimumChildren']==''||this.form1.getRawValue()['minimumChildren']==undefined)&&(this.form1.getRawValue()['maximumChildren']==''||this.form1.getRawValue()['maximumChildren']==undefined)?'none':null">
                {{element.Children}} </td>
            </ng-container>

            <!-- *ngIf -->
            <ng-container matColumnDef="עיר">
              <th mat-header-cell *matHeaderCellDef
                [style.display]="(this.form1.getRawValue()['userCity']==''||this.form1.getRawValue()['userCity']==undefined)&&(this.form1.getRawValue()['maximumChildren']==''||this.form1.getRawValue()['maximumChildren']==undefined)?'none':null">
                <strong>עיר</strong></th>
              <td mat-cell *matCellDef="let element"
                [style.display]="(this.form1.getRawValue()['userCity']==''||this.form1.getRawValue()['userCity']==undefined)&&(this.form1.getRawValue()['maximumChildren']==''||this.form1.getRawValue()['maximumChildren']==undefined)?'none':null">
                <div *ngFor="let cty of allCitiesOfUsers">
                  <p *ngIf="cty.Id==element.City">{{cty.CityName}}</p>
                </div>
              </td>
            </ng-container>

            <!-- *ngIf -->
            <ng-container matColumnDef="לומד יום שלם">
              <th mat-header-cell *matHeaderCellDef
                [style.display]="this.form1.getRawValue()['learnFullDay']!=true?'none':null"><strong>יום שלם</strong>
              </th>
              <td mat-cell *matCellDef="let element"
                [style.display]="this.form1.getRawValue()['learnFullDay']!=true?'none':null">
                {{element.FullDay?"&#10003;":"&#10007;"}} </td>
            </ng-container>

            <!-- *ngIf -->
            <ng-container matColumnDef="ראש כולל">
              <th mat-header-cell *matHeaderCellDef
                [style.display]="this.form1.getRawValue()['isManager']!=true?'none':null">
                <strong> ראש כולל</strong></th>
              <td mat-cell *matCellDef="let element"
                [style.display]="this.form1.getRawValue()['isManager']!=true?'none':null">
                {{element.IsManager?"&#10003;":"&#10007;"}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumnsUser"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsUser;"></tr>
          </table>
        </td>
        <td class="tdcontainTbl secondTbl">

          <!--Scholarship table-->
          <table mat-table [dataSource]="dataSourceScholarship" class="mat-elevation-z8 " *ngIf="showScholarshipsTable">

            <!-- Scholarship1 Column -->
            <ng-container matColumnDef="סכום מלגה">
              <th mat-header-cell *matHeaderCellDef
                [style.display]="( this.form2.getRawValue()['minimumMilga']==''||this.form2.getRawValue()['minimumMilga']==undefined)&&(this.form2.getRawValue()['maximumMilga']==''||this.form2.getRawValue()['maximumMilga']==undefined)?'none':null">
                <strong> סכום מלגה </strong></th>
              <td mat-cell *matCellDef="let element"
                [style.display]="(this.form2.getRawValue()['minimumMilga']==''||this.form2.getRawValue()['minimumMilga']==undefined)&&(this.form2.getRawValue()['maximumMilga']==''||this.form2.getRawValue()['maximumMilga']==undefined)?'none':null">
                {{element.Scholarship}} </td>
            </ng-container>

            <!-- Atmada Column -->
            <ng-container matColumnDef="התמדה">
              <th mat-header-cell *matHeaderCellDef
                [style.display]="(this.form2.getRawValue()['maximumAtmada']==''|| this.form2.getRawValue()['maximumAtmada']==undefined)&&(this.form2.getRawValue()['minimumAtmada']==''||this.form2.getRawValue()['minimumAtmada']==undefined)?'none':null">
                <strong> התמדה </strong></th>
              <td mat-cell *matCellDef="let element"
                [style.display]="(this.form2.getRawValue()['maximumAtmada']==''||this.form2.getRawValue()['maximumAtmada']==undefined)&&(this.form2.getRawValue()['minimumAtmada']==''||this.form2.getRawValue()['minimumAtmada']==undefined)?'none':null">
                {{element.Atmada}} </td>
            </ng-container>

            <ng-container matColumnDef="חיסורים">
              <th mat-header-cell *matHeaderCellDef
                [style.display]="(this.form2.getRawValue()['maximumAbsance']==''||this.form2.getRawValue()['maximumAbsance']==undefined)&&(this.form2.getRawValue()['minimumAbsance']==''||this.form2.getRawValue()['minimumAbsance']==undefined)?'none':null">
                <strong> חיסורים </strong></th>
              <td mat-cell *matCellDef="let element"
                [style.display]="(this.form2.getRawValue()['maximumAbsance']==''||this.form2.getRawValue()['maximumAbsance']==undefined)&&(this.form2.getRawValue()['minimumAbsance']==''||this.form2.getRawValue()['minimumAbsance']==undefined)?'none':null">
                {{element.Absence}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumnsScholarship"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsScholarship;"></tr>
          </table>
        </td>
        <td class="tdcontainTbl">

          <!--Loan table-->
          <table mat-table [dataSource]="dataSourceLoan" class="mat-elevation-z8  thirdForm" *ngIf="showLoansTable">

            <!-- Scholarship1 Column -->
            <ng-container matColumnDef="תאריך הלוואה">
              <th mat-header-cell *matHeaderCellDef
                [style.display]="( this.form3.getRawValue()['lastDateLoan']==''||this.form3.getRawValue()['lastDateLoan']==undefined)&&(this.form3.getRawValue()['firstDateLoan']==''||this.form3.getRawValue()['firstDateLoan']==undefined)?'none':null">
                <strong> תאריך הלוואה </strong></th>
              <td mat-cell *matCellDef="let element"
                [style.display]="(this.form3.getRawValue()['lastDateLoan']==''||this.form3.getRawValue()['lastDateLoan']==undefined)&&(this.form3.getRawValue()['firstDateLoan']==''||this.form3.getRawValue()['firstDateLoan']==undefined)?'none':null">
                {{element.HebrewMonth}} {{element.HebrewYear}} </td>
            </ng-container>

            <!-- Atmada Column -->
            <ng-container matColumnDef="סכום הלוואה">
              <th mat-header-cell *matHeaderCellDef
                [style.display]="(this.form3.getRawValue()['minSumLoan']==''|| this.form3.getRawValue()['minSumLoan']==undefined)&&(this.form3.getRawValue()['maxSumLoan']==''||this.form3.getRawValue()['maxSumLoan']==undefined)?'none':null">
                <strong> סכום הלוואה </strong></th>
              <td mat-cell *matCellDef="let element"
                [style.display]="(this.form3.getRawValue()['minSumLoan']==''||this.form3.getRawValue()['minSumLoan']==undefined)&&(this.form3.getRawValue()['maxSumLoan']==''||this.form3.getRawValue()['maxSumLoan']==undefined)?'none':null">
                {{element.RemainderDebt}} </td>
            </ng-container>


            <tr mat-header-row *matHeaderRowDef="displayedColumnsLoan"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsLoan;"></tr>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
</div>